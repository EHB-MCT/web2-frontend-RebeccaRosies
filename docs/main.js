(()=>{"use strict";var e={324:(e,t,n)=>{n.d(t,{q:()=>o});let o="aa0c97fdf12ac5c22d95200cf13d6a00"},138:(e,t,n)=>{const o=n(324).q;let s=document.getElementsByClassName("favorite");document.getElementsByClassName("favorited"),console.log("test");var a=[...document.getElementsByClassName("btn")];console.log(a);let c="";function i(){console.log("getting it, just a sec..."),fetch("https://persic.herokuapp.com/songs").then((e=>e.json())).then((e=>{console.log(e),r(e)}))}function r(e){let t=document.getElementById("suggestionsDiv"),n="";if(e){e.forEach((e=>{console.log(e.name,e.artist,e.genre,e.rating,e),n+=`<article class="songSuggestion">\n                    <h3>${e.name}</h3>\n                    <div class="info">\n                        <p>Artist: ${e.artist}</p>\n                        <p>Genre: ${e.genre}</p>\n                        <p>Rating: ${e.rating}</p>\n                    </div>\n                    <div class ="change">\n                        <button id="favorite${e._id}" class="favorite" value="${e._id}"></button>\n                        <button id="used" class="used" value="${e._id}" ></button>\n                    </div>\n                </article>`})),t.innerHTML=n;for(let t=0;t<s.length;t++)s[t].addEventListener("click",(n=>{n.preventDefault();let o=s[t].value;document.getElementById(`favorite${o}`).style.backgroundImage="url(../docs/icons/filledHeart.svg)",console.log(o,e),l(o,e)}))}else t.innerHTML=""}function l(e,t){console.log("get from songs database with id & save to favSongs database");let n={};t.forEach((t=>{e==t._id&&(n={artist:t.artist,genre:t.genre,name:t.name,rating:t.rating})})),console.log(n),fetch("https://persic.herokuapp.com/songs/favorites",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>e.json())).then((e=>{console.log("songs posted to favSongs",e),d(),console.log("getting updated list of favSongs")}))}function g(){console.log("reset function"),fetch("https://persic.herokuapp.com/songs",{method:"DELETE"}).then((e=>e.json())).then((e=>{console.log("All songs deleted"),r()}))}function d(){console.log("getting the favs, just a sec..."),fetch("https://persic.herokuapp.com/songs/favorites").then((e=>e.json())).then((e=>{!function(e){let t=document.getElementById("favoritesDiv"),n="";e.forEach((e=>{n+=`<article class="songSuggestion favoriteSong">\n                <h3>${e.name}</h3>\n                <div class="info">\n                    <p>Artist: ${e.artist}</p>\n                    <p>Genre: ${e.genre}</p>\n                    <p>Rating: ${e.rating}</p>\n                </div>\n                <div class ="change">\n                    <button id="favorited${e._id}" class="favorited" value="${e._id}"></button>\n                    <button id="used" class="used" value="${e._id}" ></button>\n                </div>\n            </article>`})),t.innerHTML=n;for(let t=0;t<s.length;t++)s[t].addEventListener("click",(n=>{n.preventDefault();let o=s[t].value;document.getElementById(`favorite${o}`).style.backgroundImage="url(../docs/icons/heart.svg)",console.log(o,e),u(o)}))}(e)}))}function u(e){console.log("delete this song"),fetch(`https://persic.herokuapp.com/songs/favorites/${e}`,{method:"DELETE"}).then((e=>e.json())).then((t=>{console.log(`song deleted with id: ${e}`,t)}))}fetch(`https://api.musixmatch.com/ws/1.1/music.genres.get?apikey=${o}`).then((e=>e.json())).then((e=>{const t=e.message.body.music_genre_list;console.log(t),t.forEach((e=>{c+=`<option class="${e.music_genre.music_genre_id} value="1">${e.music_genre.music_genre_name}</option>`})),document.getElementById("genre0").insertAdjacentHTML("afterend",c)})),document.getElementById("form").addEventListener("submit",(e=>{e.preventDefault(),console.log("submit"),function(){let e=document.getElementById("lyric").value,t=`q_lyrics=${e}`,n=document.getElementById("genre").className,s=`f_music_genre_id=${n}`,a=document.getElementById("artist").value,c=`q_artist=${a}`;console.log(e,n,a),fetch(`https://api.musixmatch.com/ws/1.1/track.search?${t}&${s}&${c}&s_track_rating=desc&apikey=${o}`).then((e=>e.json())).then((e=>{let t=e.message.body.track_list;console.log(t),t.forEach((e=>{let t="";t=e.track.primary_genres.music_genre_list[0]?e.track.primary_genres.music_genre_list[0].music_genre.music_genre_name:"/",console.log(t);let n={artist:e.track.artist_name,genre:t,name:e.track.track_name,rating:e.track.track_rating};console.log(e.track.artist_name,t,e.track.track_name,e.track.track_rating),function(e){fetch("https://persic.herokuapp.com/songs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{console.log("song posted",e),i(),console.log("getting updated list of songs")}))}(n)}))}))}()})),i(),document.getElementById("resetSongs").addEventListener("click",(e=>{e.preventDefault(),console.log("reset"),g()})),document.getElementById("resetSongs").addEventListener("click",(e=>{e.preventDefault(),console.log("reset"),g()})),d()}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(138),n(324)})();