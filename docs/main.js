(()=>{"use strict";var e={324:(e,t,n)=>{n.d(t,{q:()=>s});let s="aa0c97fdf12ac5c22d95200cf13d6a00"},138:(e,t,n)=>{const s=n(324).q;let o=document.getElementsByClassName("favorite"),c=document.getElementsByClassName("favorited"),a=document.getElementsByClassName("favClock");console.log("test");var l=[...document.getElementsByClassName("btn")];console.log(l);let r="";function i(){console.log("getting it, just a sec..."),fetch("https://persic.herokuapp.com/songs").then((e=>e.json())).then((e=>{console.log(e),g(e)}))}function g(e){let t=document.getElementById("suggestionsDiv"),n="";if(e){e.forEach((e=>{console.log(e.name,e.artist,e.genre,e.rating,e),n+=`<article class="songSuggestion">\n                    <h3>${e.name}</h3>\n                    <div class="info">\n                        <p>Artist: ${e.artist}</p>\n                        <p>Genre: ${e.genre}</p>\n                        <p>Rating: ${e.rating}</p>\n                    </div>\n                    <div class ="change">\n                        <button id="favorite${e._id}" class="favorite" value="${e._id}"></button>\n                        <button id="clock${e._id}" class="favClock used 0" value="${e._id}" ></button>\n                    </div>\n                </article>`})),t.innerHTML=n;for(let t=0;t<o.length;t++)o[t].addEventListener("click",(n=>{n.preventDefault();let s=o[t].value;document.getElementById(`favorite${s}`).style.backgroundImage="url(../docs/icons/filledHeart.svg)",d(s,e)}));for(let e=0;e<a.length;e++)a[e].addEventListener("click",(t=>{t.preventDefault();let n=a[e].value;console.log(a[e].className),"favClock used 0"==a[e].className?(a[e].className="favClock used 1",document.getElementById(`clock${n}`).style.backgroundImage="url(../docs/icons/usedOnce.svg)"):"favClock used 1"==a[e].className?(a[e].className="favClock used 2",document.getElementById(`clock${n}`).style.backgroundImage="url(../docs/icons/usedTwice.svg)"):(a[e].className="favClock used 0",document.getElementById(`clock${n}`).style.backgroundImage="url(../docs/icons/used2.svg)")}))}else t.innerHTML=""}function d(e,t){console.log("get from songs database with id & save to favSongs database");let n={};t.forEach((t=>{e==t._id&&(n={artist:t.artist,genre:t.genre,name:t.name,rating:t.rating})})),console.log(n),fetch("https://persic.herokuapp.com/songs/favorites",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>e.json())).then((e=>{console.log("songs posted to favSongs",e),m(),console.log("getting updated list of favSongs")}))}function u(){console.log("reset function"),fetch("https://persic.herokuapp.com/songs",{method:"DELETE"}).then((e=>e.json())).then((e=>{console.log("All songs deleted"),g()}))}function m(){console.log("getting the favs, just a sec..."),fetch("https://persic.herokuapp.com/songs/favorites").then((e=>e.json())).then((e=>{!function(e){let t=document.getElementById("favoritesDiv"),n="";e.forEach((e=>{n+=`<article class="songSuggestion favoriteSong">\n                <h3>${e.name}</h3>\n                <div class="info">\n                    <p>Artist: ${e.artist}</p>\n                    <p>Genre: ${e.genre}</p>\n                    <p>Rating: ${e.rating}</p>\n                </div>\n                <div class ="change">\n                    <button id="favorited${e._id}" class="favorited" value="${e._id}"></button>\n                    <button id="clock${e._id}" class="favClock used 0" value="${e._id}" ></button>\n                </div>\n            </article>`})),t.innerHTML=n;for(let t=0;t<c.length;t++)c[t].addEventListener("click",(n=>{n.preventDefault();let s=c[t].value;document.getElementById(`favorited${s}`).style.backgroundImage="url(../docs/icons/heart.svg)",console.log(s,e),f(s)}));for(let e=0;e<a.length;e++)a[e].addEventListener("click",(t=>{t.preventDefault();let n=a[e].value;console.log(a[e].className),"favClock used 0"==a[e].className?(a[e].className="favClock used 1",document.getElementById(`clock${n}`).style.backgroundImage="url(../docs/icons/usedOnce.svg)"):"favClock used 1"==a[e].className?(a[e].className="favClock used 2",document.getElementById(`clock${n}`).style.backgroundImage="url(../docs/icons/usedTwice.svg)"):(a[e].className="favClock used 0",document.getElementById(`clock${n}`).style.backgroundImage="url(../docs/icons/used2.svg)")}))}(e)}))}function f(e){console.log("delete this song"),fetch(`https://persic.herokuapp.com/songs/favorites/${e}`,{method:"DELETE"}).then((e=>e.json())).then((t=>{console.log(`song deleted with id: ${e}`,t)}))}fetch(`https://api.musixmatch.com/ws/1.1/music.genres.get?apikey=${s}`).then((e=>e.json())).then((e=>{const t=e.message.body.music_genre_list;console.log(t),t.forEach((e=>{r+=`<option class="${e.music_genre.music_genre_id} value="1">${e.music_genre.music_genre_name}</option>`})),document.getElementById("genre0").insertAdjacentHTML("afterend",r)})),document.getElementById("form").addEventListener("submit",(e=>{e.preventDefault(),console.log("submit"),function(){let e=document.getElementById("lyric").value,t=`q_lyrics=${e}`,n=document.getElementById("genre").className,o=`f_music_genre_id=${n}`,c=document.getElementById("artist").value,a=`q_artist=${c}`;console.log(e,n,c),fetch(`https://api.musixmatch.com/ws/1.1/track.search?${t}&${o}&${a}&s_track_rating=desc&apikey=${s}`).then((e=>e.json())).then((e=>{let t=e.message.body.track_list;console.log(t),t.forEach((e=>{let t="";t=e.track.primary_genres.music_genre_list[0]?e.track.primary_genres.music_genre_list[0].music_genre.music_genre_name:"/",console.log(t);let n={artist:e.track.artist_name,genre:t,name:e.track.track_name,rating:e.track.track_rating};console.log(e.track.artist_name,t,e.track.track_name,e.track.track_rating),function(e){fetch("https://persic.herokuapp.com/songs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{console.log("song posted",e),i(),console.log("getting updated list of songs")}))}(n)}))}))}()})),i(),document.getElementById("resetSongs").addEventListener("click",(e=>{e.preventDefault(),console.log("reset"),u()})),document.getElementById("resetSongs").addEventListener("click",(e=>{e.preventDefault(),console.log("reset"),u()})),m()}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var c=t[s]={exports:{}};return e[s](c,c.exports,n),c.exports}n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(138),n(324)})();